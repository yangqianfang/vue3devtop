var F=(E,m,p)=>new Promise((f,c)=>{var b=s=>{try{_(p.next(s))}catch(d){c(d)}},B=s=>{try{_(p.throw(s))}catch(d){c(d)}},_=s=>s.done?f(s.value):Promise.resolve(s.value).then(b,B);_((p=p.apply(E,m)).next())});import{d as P,f as z,r as h,u as M,b as I,a3 as T,z as G,j as t,o as D,h as C,a as u,w as n,aE as H,aB as J,i as K,l as U,m as Q,n as W,aa as X,ad as Y,x as Z,q as ee,s as ue,aN as ae,aO as ne,A as le,c as te,a9 as se}from"./index.43e8d9d2.js";import{a as oe,s as ie}from"./userlist.2187648f.js";import{p as re}from"./publicData.c6a08791.js";import"./console.d8d50ee9.js";const pe={style:{"margin-left":"80px"}},ce=U(" \u4FDD\u5B58 "),_e=U(" \u53D6\u6D88 "),Fe=P({name:"add",setup(E){const m=re(),p=z(),f=h(""),c=h(!1),b=h(null),B=M(),_=h([]),s=window.$Loading,d=[{label:"\u8D85\u7EA7\u7BA1\u7406\u5458",value:"1"},{label:"\u666E\u901A\u7528\u6237",value:"2"}],L=[{label:"\u542F\u7528",value:"1"},{label:"\u7981\u7528",value:"0"}],R={username:{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u540D\u79F0",trigger:["blur","input"]},nickname:{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D",trigger:["blur","input"]},password:{message:"\u8BF7\u8F93\u5165\u7528\u6237\u5BC6\u7801",trigger:["blur","input"]},appmembers:{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u6210\u5458",trigger:["blur","input"]},publish:{type:"array",required:!0,message:"\u8BF7\u8F93\u52FE\u9009\u53EF\u53D1\u5E03\u9879\u76EE",trigger:["change"]}};let a=I((()=>({username:"",nickname:"",password:"",cid:"1",enable:"1",publish:[]}))());const w=T(()=>m.publicData);G(()=>F(this,null,function*(){const{id:r}=p.currentRoute.value.params;!w.value&&(yield m.getPublicData()),_.value=w.value.enables,r&&(f.value=r,V(r))}));function V(r){return F(this,null,function*(){try{s.value.show();const e=yield oe({id:r}),{user:o}=e,i=o.publish;let g=i.split("@")||[];i==="all"&&(g=_.value);const v={id:o.id,username:o.username,nickname:o.nickname,password:"",cid:String(o.cid),enable:String(o.enable),publish:g};a=Object.assign(t(a),v),s.value.hide()}catch(e){s.value.hide()}})}function $(){b.value.validate(r=>F(this,null,function*(){if(!r){const e=Object.assign({},a);e.publish=e.publish.join("@"),c.value=!0;try{yield ie(e),c.value=!1,e.id?B.success("\u4FDD\u5B58\u6210\u529F\uFF01"):y()}catch(o){c.value=!1}}}))}function y(){p.push({name:"user-list"})}return(r,e)=>{const o=Q,i=W,g=se,v=X,q=Y,k=Z,x=ee,A=ue,j=ae,N=ne,S=le;return D(),C("div",null,[u(S,{bordered:!1,class:"mt-4 proCard","content-style":"padding-top: 0;padding-bottom: 0;",size:"small",title:f.value?"\u7F16\u8F91\u7528\u6237":"\u6DFB\u52A0\u7528\u6237"},{default:n(()=>[u(N,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen"},{default:n(()=>[u(j,{offset:"0 s:0 m:1 l:1 xl:1 2xl:1"},{default:n(()=>[u(A,{"label-width":120,model:t(a),rules:R,"label-placement":"left",ref_key:"formRef",ref:b,class:"py-8"},{default:n(()=>[u(i,{label:"\u767B\u5F55\u540D\u79F0",path:"username"},{default:n(()=>[u(o,{placeholder:"\u8F93\u5165\u767B\u5F55\u540D\u79F0",value:t(a).username,"onUpdate:value":e[0]||(e[0]=l=>t(a).username=l)},null,8,["value"])]),_:1}),u(i,{label:"\u771F\u5B9E\u59D3\u540D",path:"nickname"},{default:n(()=>[u(o,{placeholder:"\u8F93\u5165\u771F\u5B9E\u59D3\u540D",value:t(a).nickname,"onUpdate:value":e[1]||(e[1]=l=>t(a).nickname=l)},null,8,["value"])]),_:1}),u(i,{label:"\u7528\u6237\u5BC6\u7801",path:"password"},{default:n(()=>[u(o,{autocomplete:"",placeholder:"\u8F93\u5165\u7528\u6237\u5BC6\u7801",type:"password","show-password-on":"click",value:t(a).password,"onUpdate:value":e[2]||(e[2]=l=>t(a).password=l)},null,8,["value"])]),_:1}),u(i,{label:"\u53EF\u53D1\u5E03\u9879\u76EE",path:"publish"},{default:n(()=>[u(q,{value:t(a).publish,"onUpdate:value":e[3]||(e[3]=l=>t(a).publish=l)},{default:n(()=>[u(v,{"item-style":"display: flex;"},{default:n(()=>[(D(!0),C(H,null,J(_.value,(l,O)=>(D(),te(g,{value:l,label:l,key:O},null,8,["value","label"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),u(i,{label:"\u7528\u6237\u6743\u9650",path:"cid"},{default:n(()=>[u(k,{placeholder:"\u8BF7\u9009\u62E9\u7528\u6237\u6743\u9650",options:d,value:t(a).cid,"onUpdate:value":e[4]||(e[4]=l=>t(a).cid=l)},null,8,["value"])]),_:1}),u(i,{label:"\u7528\u6237\u72B6\u6001",path:"enable"},{default:n(()=>[u(k,{placeholder:"\u8BF7\u9009\u62E9\u7528\u6237\u72B6\u6001",options:L,value:t(a).enable,"onUpdate:value":e[5]||(e[5]=l=>t(a).enable=l)},null,8,["value"])]),_:1}),K("div",pe,[u(v,null,{default:n(()=>[u(x,{type:"primary",onClick:$,loading:c.value},{default:n(()=>[ce]),_:1},8,["loading"]),u(x,{type:"default",onClick:y},{default:n(()=>[_e]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["title"])])}}});export{Fe as default};
