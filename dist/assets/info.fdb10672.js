var f=(E,g,m)=>new Promise((d,_)=>{var c=r=>{try{s(m.next(r))}catch(u){_(u)}},v=r=>{try{s(m.throw(r))}catch(u){_(u)}},s=r=>r.done?d(r.value):Promise.resolve(r.value).then(c,v);s((m=m.apply(E,g)).next())});import{d as V,f as j,r as B,b as h,a3 as k,z as N,v as P,aM as S,j as p,o as $,h as G,a as e,w as n,i as I,l as C,m as O,n as T,x as M,q as z,aa as H,s as J,aN as K,aO as Q,A as W}from"./index.43e8d9d2.js";import{e as X,f as Y}from"./console.d8d50ee9.js";import{p as Z}from"./publicData.c6a08791.js";const uu={style:{"margin-left":"80px"}},eu=C(" \u4FDD\u5B58 "),au=C(" \u53D6\u6D88 "),lu=V({name:"info",setup(E){const g=Z(),m=j(),d=B(!1),_=B(null),c=window.$Loading,v={appname:{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D\u79F0",trigger:["blur","input"]},apptype:{required:!0,message:"\u8BF7\u9009\u5E94\u7528\u7C7B\u578B",trigger:"change"},appapi:{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528api",trigger:["blur","input"]},appversion:{required:!0,message:"\u8BF7\u8F93\u5165\u5F53\u524D\u7248\u672C",trigger:["blur","input"]},appmembers:{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u6210\u5458",trigger:["blur","input"]},appgit:{required:!0,message:"\u8BF7\u8F93\u5165Git\u4ED3\u5E93\u540D\u79F0",trigger:["blur","input"]},appgroup:{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE\u5206\u7EC4",trigger:"change"}},s=h({typeList:[],groupsList:[]});let u=h((()=>({appname:"",apptype:null,appapi:"",appversion:"",appmembers:"",appgit:"",appgroup:null}))());const b=k(()=>g.publicData);N(()=>f(this,null,function*(){const{id:i}=m.currentRoute.value.params;!b.value&&(yield g.getPublicData()),s.typeList=P(b.value.type),s.groupsList=S(b.value.groups),i&&w(i)}));function w(i){return f(this,null,function*(){try{c.value.show();const a=yield X({id:i}),{app:t}=a,l={id:t.id,appname:t.name,apptype:t.type,appapi:t.api,appversion:t.version,appmembers:t.members,appgit:t.project,appgroup:t.groups};u=Object.assign(p(u),l),c.value.hide()}catch(a){c.value.hide()}})}function L(){_.value.validate(i=>f(this,null,function*(){if(!i){const a=Object.assign({},u);d.value=!0;try{yield Y(a),d.value=!1,F()}catch(t){d.value=!1}}}))}function F(){m.push({name:"console"})}return(i,a)=>{const t=O,l=T,D=M,y=z,x=H,q=J,U=K,A=Q,R=W;return $(),G("div",null,[e(R,{bordered:!1,class:"mt-4 proCard"},{default:n(()=>[e(A,{cols:"1 s:1 m:3 l:3 xl:3 2xl:3",responsive:"screen"},{default:n(()=>[e(U,{offset:"0 s:0 m:1 l:1 xl:1 2xl:1"},{default:n(()=>[e(q,{"label-width":120,model:p(u),rules:v,"label-placement":"left",ref_key:"formRef",ref:_,class:"py-8"},{default:n(()=>[e(l,{label:"\u5E94\u7528\u540D\u79F0",path:"appname"},{default:n(()=>[e(t,{placeholder:"\u8F93\u5165\u5E94\u7528\u540D\u79F0",value:p(u).appname,"onUpdate:value":a[0]||(a[0]=o=>p(u).appname=o)},null,8,["value"])]),_:1}),e(l,{label:"\u5E94\u7528\u7C7B\u578B",path:"apptype"},{default:n(()=>[e(D,{clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5E94\u7528\u7C7B\u578B",options:s.typeList,value:p(u).apptype,"onUpdate:value":a[1]||(a[1]=o=>p(u).apptype=o)},null,8,["options","value"])]),_:1}),e(l,{label:"\u5E94\u7528\u5F00\u653EAPI",path:"appapi"},{default:n(()=>[e(t,{placeholder:"\u8F93\u5165\u5E94\u7528\u5F00\u653EAPI",value:p(u).appapi,"onUpdate:value":a[2]||(a[2]=o=>p(u).appapi=o)},null,8,["value"])]),_:1}),e(l,{label:"\u5F53\u524D\u7248\u672C",path:"appversion"},{default:n(()=>[e(t,{placeholder:"\u8F93\u5165\u5F53\u524D\u7248\u672C",value:p(u).appversion,"onUpdate:value":a[3]||(a[3]=o=>p(u).appversion=o)},null,8,["value"])]),_:1}),e(l,{label:"Git\u4ED3\u5E93\u540D\u79F0",path:"appgit"},{default:n(()=>[e(t,{placeholder:"\u8F93\u5165Git\u4ED3\u5E93\u540D\u79F0",value:p(u).appgit,"onUpdate:value":a[4]||(a[4]=o=>p(u).appgit=o)},null,8,["value"])]),_:1}),e(l,{label:"\u9879\u76EE\u6210\u5458",path:"appmembers"},{default:n(()=>[e(t,{"show-button":!0,placeholder:"\u8F93\u5165\u9879\u76EE\u6210\u5458(\u82F1\u6587\u9017\u53F7,\u5206\u9694)",value:p(u).appmembers,"onUpdate:value":a[5]||(a[5]=o=>p(u).appmembers=o)},null,8,["value"])]),_:1}),e(l,{label:"\u9879\u76EE\u5206\u7EC4",path:"appgroup"},{default:n(()=>[e(D,{placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE\u5206\u7EC4",options:s.groupsList,value:p(u).appgroup,"onUpdate:value":a[6]||(a[6]=o=>p(u).appgroup=o)},null,8,["options","value"])]),_:1}),I("div",uu,[e(x,null,{default:n(()=>[e(y,{type:"primary",onClick:L,loading:i.downLoadloading},{default:n(()=>[eu]),_:1},8,["loading"]),e(y,{type:"default",onClick:F},{default:n(()=>[au]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}});export{lu as default};
